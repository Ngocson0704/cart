{"ast":null,"code":"import * as types from './../constants/ActionType';\nvar data = JSON.parse(localStorage.getItem('CART'));\nvar initialState = data ? data : [];\n\nconst cart = (state = initialState, action) => {\n  var {\n    product,\n    quantity\n  } = action;\n  var index = -1; // khong tim thay\n\n  switch (action.type) {\n    case types.ADD_TO_CART:\n      index = findProductInCart(state, product);\n\n      if (index !== -1) {\n        state[index].quantity += quantity;\n      } else {\n        state.push({\n          product,\n          quantity\n        });\n      }\n\n      localStorage.setItem('CART', JSON.stringify(state));\n      return [...state];\n\n    case types.DELETE_PRODUCT_IN_CART:\n      index = findProductInCart(state, product);\n\n      if (index !== -1) {\n        state.splice(index, 1);\n      }\n\n      localStorage.setItem('CART', JSON.stringify(state));\n      return [...state];\n\n    case types.UPDATE_PRODUCT_IN_CART:\n      index = findProductInCart(state, product);\n\n      if (index !== -1) {\n        state[index].quantity = quantity;\n      }\n\n    default:\n      return [...state];\n  }\n};\n\nvar findProductInCart = (cart, product) => {\n  var index = -1; // khong tim thay\n\n  if (cart.length > 0) {\n    for (var i = 0; i < cart.length; i++) {\n      if (cart[i].product.id === product.id) {\n        index = i;\n        break;\n      }\n    }\n  }\n\n  return index;\n};\n\nexport default cart;","map":{"version":3,"sources":["/home/ngocson/Documents/cart/src/reducers/cart.js"],"names":["types","data","JSON","parse","localStorage","getItem","initialState","cart","state","action","product","quantity","index","type","ADD_TO_CART","findProductInCart","push","setItem","stringify","DELETE_PRODUCT_IN_CART","splice","UPDATE_PRODUCT_IN_CART","length","i","id"],"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,2BAAvB;AAEA,IAAIC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAX;AACA,IAAIC,YAAY,GAAEL,IAAI,GAAGA,IAAH,GAAU,EAAhC;;AAEA,MAAMM,IAAI,GAAG,CAACC,KAAK,GAAGF,YAAT,EAAuBG,MAAvB,KAAkC;AAC3C,MAAI;AAAEC,IAAAA,OAAF;AAAWC,IAAAA;AAAX,MAAwBF,MAA5B;AACA,MAAIG,KAAK,GAAG,CAAC,CAAb,CAF2C,CAE3B;;AAChB,UAAQH,MAAM,CAACI,IAAf;AACI,SAAKb,KAAK,CAACc,WAAX;AACIF,MAAAA,KAAK,GAAGG,iBAAiB,CAACP,KAAD,EAAQE,OAAR,CAAzB;;AACA,UAAIE,KAAK,KAAK,CAAC,CAAf,EAAkB;AACdJ,QAAAA,KAAK,CAACI,KAAD,CAAL,CAAaD,QAAb,IAAyBA,QAAzB;AACH,OAFD,MAEO;AACHH,QAAAA,KAAK,CAACQ,IAAN,CAAW;AACPN,UAAAA,OADO;AAEPC,UAAAA;AAFO,SAAX;AAIH;;AACDP,MAAAA,YAAY,CAACa,OAAb,CAAqB,MAArB,EAA4Bf,IAAI,CAACgB,SAAL,CAAeV,KAAf,CAA5B;AACA,aAAO,CAAC,GAAGA,KAAJ,CAAP;;AACJ,SAAKR,KAAK,CAACmB,sBAAX;AACIP,MAAAA,KAAK,GAACG,iBAAiB,CAACP,KAAD,EAAOE,OAAP,CAAvB;;AACA,UAAGE,KAAK,KAAG,CAAC,CAAZ,EAAc;AACVJ,QAAAA,KAAK,CAACY,MAAN,CAAaR,KAAb,EAAmB,CAAnB;AACH;;AACDR,MAAAA,YAAY,CAACa,OAAb,CAAqB,MAArB,EAA4Bf,IAAI,CAACgB,SAAL,CAAeV,KAAf,CAA5B;AACA,aAAO,CAAC,GAAGA,KAAJ,CAAP;;AACJ,SAAKR,KAAK,CAACqB,sBAAX;AACIT,MAAAA,KAAK,GAACG,iBAAiB,CAACP,KAAD,EAAOE,OAAP,CAAvB;;AACI,UAAGE,KAAK,KAAG,CAAC,CAAZ,EAAc;AACVJ,QAAAA,KAAK,CAACI,KAAD,CAAL,CAAaD,QAAb,GAAsBA,QAAtB;AACH;;AAET;AAAS,aAAO,CAAC,GAAGH,KAAJ,CAAP;AA1Bb;AA4BH,CA/BD;;AAiCA,IAAIO,iBAAiB,GAAG,CAACR,IAAD,EAAOG,OAAP,KAAmB;AACvC,MAAIE,KAAK,GAAG,CAAC,CAAb,CADuC,CACvB;;AAChB,MAAIL,IAAI,CAACe,MAAL,GAAc,CAAlB,EAAqB;AACjB,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGhB,IAAI,CAACe,MAAzB,EAAiCC,CAAC,EAAlC,EAAsC;AAClC,UAAIhB,IAAI,CAACgB,CAAD,CAAJ,CAAQb,OAAR,CAAgBc,EAAhB,KAAuBd,OAAO,CAACc,EAAnC,EAAuC;AACnCZ,QAAAA,KAAK,GAAGW,CAAR;AACA;AACH;AACJ;AACJ;;AACD,SAAOX,KAAP;AACH,CAXD;;AAaA,eAAeL,IAAf","sourcesContent":["import * as types from './../constants/ActionType';\n\nvar data = JSON.parse(localStorage.getItem('CART'));\nvar initialState =data ? data : [];\n\nconst cart = (state = initialState, action) => {\n    var { product, quantity } = action;\n    var index = -1; // khong tim thay\n    switch (action.type) {\n        case types.ADD_TO_CART:\n            index = findProductInCart(state, product);\n            if (index !== -1) {\n                state[index].quantity += quantity;\n            } else {\n                state.push({\n                    product,\n                    quantity\n                })\n            }\n            localStorage.setItem('CART',JSON.stringify(state))\n            return [...state];\n        case types.DELETE_PRODUCT_IN_CART:\n            index=findProductInCart(state,product);\n            if(index!==-1){\n                state.splice(index,1);\n            }\n            localStorage.setItem('CART',JSON.stringify(state))\n            return [...state];\n        case types.UPDATE_PRODUCT_IN_CART:\n            index=findProductInCart(state,product);\n                if(index!==-1){\n                    state[index].quantity=quantity;\n                }\n            \n        default: return [...state];\n    }\n}\n\nvar findProductInCart = (cart, product) => {\n    var index = -1; // khong tim thay\n    if (cart.length > 0) {\n        for (var i = 0; i < cart.length; i++) {\n            if (cart[i].product.id === product.id) {\n                index = i;\n                break;\n            }\n        }\n    }\n    return index;\n}\n\nexport default cart;"]},"metadata":{},"sourceType":"module"}