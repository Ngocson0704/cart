{"ast":null,"code":"import _toConsumableArray from\"/home/ngocson/Documents/cart/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import*as types from'./../constants/ActionType';var data=JSON.parse(localStorage.getItem('CART'));var initialState=data?data:[];var cart=function cart(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;var product=action.product,quantity=action.quantity;var index=-1;// khong tim thay\nswitch(action.type){case types.ADD_TO_CART:index=findProductInCart(state,product);if(index!==-1){state[index].quantity+=quantity;}else{state.push({product:product,quantity:quantity});}localStorage.setItem('CART',JSON.stringify(state));return _toConsumableArray(state);case types.DELETE_PRODUCT_IN_CART:index=findProductInCart(state,product);if(index!==-1){state.splice(index,1);}localStorage.setItem('CART',JSON.stringify(state));return _toConsumableArray(state);case types.UPDATE_PRODUCT_IN_CART:index=findProductInCart(state,product);if(index!==-1){state[index].quantity=quantity;}localStorage.setItem('CART',JSON.stringify(state));return _toConsumableArray(state);default:return _toConsumableArray(state);}};var findProductInCart=function findProductInCart(cart,product){var index=-1;// khong tim thay\nif(cart.length>0){for(var i=0;i<cart.length;i++){if(cart[i].product.id===product.id){index=i;break;}}}return index;};export default cart;","map":{"version":3,"sources":["/home/ngocson/Documents/cart/src/reducers/cart.js"],"names":["types","data","JSON","parse","localStorage","getItem","initialState","cart","state","action","product","quantity","index","type","ADD_TO_CART","findProductInCart","push","setItem","stringify","DELETE_PRODUCT_IN_CART","splice","UPDATE_PRODUCT_IN_CART","length","i","id"],"mappings":"2JAAA,MAAO,GAAKA,CAAAA,KAAZ,KAAuB,2BAAvB,CAEA,GAAIC,CAAAA,IAAI,CAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAX,CACA,GAAIC,CAAAA,YAAY,CAAGL,IAAI,CAAGA,IAAH,CAAU,EAAjC,CAEA,GAAMM,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,EAAkC,IAAjCC,CAAAA,KAAiC,2DAAzBF,YAAyB,IAAXG,CAAAA,MAAW,8CACrCC,CAAAA,OADqC,CACfD,MADe,CACrCC,OADqC,CAC5BC,QAD4B,CACfF,MADe,CAC5BE,QAD4B,CAE3C,GAAIC,CAAAA,KAAK,CAAG,CAAC,CAAb,CAAgB;AAChB,OAAQH,MAAM,CAACI,IAAf,EACI,IAAKb,CAAAA,KAAK,CAACc,WAAX,CACIF,KAAK,CAAGG,iBAAiB,CAACP,KAAD,CAAQE,OAAR,CAAzB,CACA,GAAIE,KAAK,GAAK,CAAC,CAAf,CAAkB,CACdJ,KAAK,CAACI,KAAD,CAAL,CAAaD,QAAb,EAAyBA,QAAzB,CACH,CAFD,IAEO,CACHH,KAAK,CAACQ,IAAN,CAAW,CACPN,OAAO,CAAPA,OADO,CAEPC,QAAQ,CAARA,QAFO,CAAX,EAIH,CACDP,YAAY,CAACa,OAAb,CAAqB,MAArB,CAA6Bf,IAAI,CAACgB,SAAL,CAAeV,KAAf,CAA7B,EACA,0BAAWA,KAAX,EACJ,IAAKR,CAAAA,KAAK,CAACmB,sBAAX,CACIP,KAAK,CAAGG,iBAAiB,CAACP,KAAD,CAAQE,OAAR,CAAzB,CACA,GAAIE,KAAK,GAAK,CAAC,CAAf,CAAkB,CACdJ,KAAK,CAACY,MAAN,CAAaR,KAAb,CAAoB,CAApB,EACH,CACDR,YAAY,CAACa,OAAb,CAAqB,MAArB,CAA6Bf,IAAI,CAACgB,SAAL,CAAeV,KAAf,CAA7B,EACA,0BAAWA,KAAX,EACJ,IAAKR,CAAAA,KAAK,CAACqB,sBAAX,CACIT,KAAK,CAAGG,iBAAiB,CAACP,KAAD,CAAQE,OAAR,CAAzB,CACA,GAAIE,KAAK,GAAK,CAAC,CAAf,CAAkB,CACdJ,KAAK,CAACI,KAAD,CAAL,CAAaD,QAAb,CAAwBA,QAAxB,CACH,CACDP,YAAY,CAACa,OAAb,CAAqB,MAArB,CAA6Bf,IAAI,CAACgB,SAAL,CAAeV,KAAf,CAA7B,EACA,0BAAWA,KAAX,EACJ,QAAS,0BAAWA,KAAX,EA3Bb,CA6BH,CAhCD,CAkCA,GAAIO,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAACR,IAAD,CAAOG,OAAP,CAAmB,CACvC,GAAIE,CAAAA,KAAK,CAAG,CAAC,CAAb,CAAgB;AAChB,GAAIL,IAAI,CAACe,MAAL,CAAc,CAAlB,CAAqB,CACjB,IAAK,GAAIC,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGhB,IAAI,CAACe,MAAzB,CAAiCC,CAAC,EAAlC,CAAsC,CAClC,GAAIhB,IAAI,CAACgB,CAAD,CAAJ,CAAQb,OAAR,CAAgBc,EAAhB,GAAuBd,OAAO,CAACc,EAAnC,CAAuC,CACnCZ,KAAK,CAAGW,CAAR,CACA,MACH,CACJ,CACJ,CACD,MAAOX,CAAAA,KAAP,CACH,CAXD,CAaA,cAAeL,CAAAA,IAAf","sourcesContent":["import * as types from './../constants/ActionType';\n\nvar data = JSON.parse(localStorage.getItem('CART'));\nvar initialState = data ? data : [];\n\nconst cart = (state = initialState, action) => {\n    var { product, quantity } = action;\n    var index = -1; // khong tim thay\n    switch (action.type) {\n        case types.ADD_TO_CART:\n            index = findProductInCart(state, product);\n            if (index !== -1) {\n                state[index].quantity += quantity;\n            } else {\n                state.push({\n                    product,\n                    quantity\n                })\n            }\n            localStorage.setItem('CART', JSON.stringify(state))\n            return [...state];\n        case types.DELETE_PRODUCT_IN_CART:\n            index = findProductInCart(state, product);\n            if (index !== -1) {\n                state.splice(index, 1);\n            }\n            localStorage.setItem('CART', JSON.stringify(state))\n            return [...state];\n        case types.UPDATE_PRODUCT_IN_CART:\n            index = findProductInCart(state, product);\n            if (index !== -1) {\n                state[index].quantity = quantity;\n            }\n            localStorage.setItem('CART', JSON.stringify(state))\n            return [...state];\n        default: return [...state];\n    }\n}\n\nvar findProductInCart = (cart, product) => {\n    var index = -1; // khong tim thay\n    if (cart.length > 0) {\n        for (var i = 0; i < cart.length; i++) {\n            if (cart[i].product.id === product.id) {\n                index = i;\n                break;\n            }\n        }\n    }\n    return index;\n}\n\nexport default cart;"]},"metadata":{},"sourceType":"module"}